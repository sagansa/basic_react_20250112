import{r as s,a as E,j as e,M as D}from"./app-C6TZeccX.js";import{A as H}from"./AuthenticatedLayout-f4oES0j-.js";import{P}from"./PrimaryButton-CeVkU3Vv.js";import{T as j}from"./TextInput-C1j5k6Oi.js";import{I as m}from"./InputLabel-BnJ3Sk5Y.js";import{I as u}from"./InputError-BdIwntLj.js";import"./ApplicationLogo-CaBVIHqp.js";import"./transition-DqBR6ccS.js";function O({auth:f,sources:c,weights:g}){const[t,b]=s.useState(c.length>0?c[0].id:""),[l,v]=s.useState(new Date().toISOString().split("T")[0]),p={};g.forEach(r=>p[r]="");const{data:x,setData:n,post:y,processing:N,errors:o,reset:C,recentlySuccessful:S}=E({gold_price_source_id:t,date:l,prices:[]}),[h,k]=s.useState(p);s.useEffect(()=>{n("gold_price_source_id",t)},[t]),s.useEffect(()=>{n("date",l)},[l]);const I=(r,a)=>{k(d=>({...d,[r]:a}))},_=r=>{r.preventDefault();const a=Object.entries(h).filter(([d,i])=>i!==""&&i!==null).map(([d,i])=>({weight:parseFloat(d),price:parseInt(i.replace(/\D/g,""),10)}));n("prices",a)};return s.useEffect(()=>{x.prices.length>0&&y(route("gold-prices.store"),{preserveScroll:!0,onSuccess:()=>{}})},[x.prices]),e.jsxs(H,{user:f.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Input Harga Emas"}),children:[e.jsx(D,{title:"Input Harga Emas"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white shadow-sm dark:bg-gray-800 sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[S&&e.jsxs("div",{className:"p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg dark:bg-green-200 dark:text-green-800",role:"alert",children:[e.jsx("span",{className:"font-medium",children:"Success!"})," Harga berhasil disimpan."]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"source",value:"Sumber Harga"}),e.jsx("select",{id:"source",className:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-900 dark:border-gray-700 dark:text-gray-300",value:t,onChange:r=>b(r.target.value),required:!0,children:c.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))}),e.jsx(u,{message:o.gold_price_source_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"date",value:"Tanggal"}),e.jsx(j,{id:"date",type:"date",className:"block w-full mt-1",value:l,onChange:r=>v(r.target.value),required:!0}),e.jsx(u,{message:o.date,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Input Harga per Gramasi"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:g.map(r=>e.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-700",children:[e.jsx(m,{htmlFor:`price-${r}`,value:`${r} gram`}),e.jsx(j,{id:`price-${r}`,type:"number",className:"block w-full mt-1",value:h[r],onChange:a=>I(r,a.target.value),placeholder:"Rp"})]},r))}),e.jsx(u,{message:o.prices,className:"mt-2"})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(P,{disabled:N,children:"Simpan Harga"})})]})]})})})})]})}export{O as default};
