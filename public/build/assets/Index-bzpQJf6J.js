import{r as k,j as e,M as V,U as n,h as E}from"./app-C6TZeccX.js";import{A as F}from"./AuthenticatedLayout-f4oES0j-.js";import{P as C}from"./PrimaryButton-CeVkU3Vv.js";import{D as G}from"./DangerButton-COoC9oes.js";import{T as $}from"./TextInput-C1j5k6Oi.js";import"./ApplicationLogo-CaBVIHqp.js";import"./transition-DqBR6ccS.js";function X({auth:f,golds:d,totalWeight:j,totalBuyPrice:D,...S}){const{user:b}=f,m=r=>{var a;return(a=b==null?void 0:b.all_permissions)==null?void 0:a.includes(r)},[c,T]=k.useState(""),[t,L]=k.useState("date"),[i,I]=k.useState("asc"),H=r=>{T(r.target.value)},u=r=>{const a=t===r&&i==="asc"?"desc":"asc";L(r),I(a)},l=(Array.isArray(d==null?void 0:d.data)?d.data:[]).filter(r=>{var x,g,w,v,_;const a=((g=(x=r.product_gold)==null?void 0:x.name)==null?void 0:g.toLowerCase())||"",s=((w=r.buy_from)==null?void 0:w.toLowerCase())||"",p=((v=r.sell_to)==null?void 0:v.toLowerCase())||"",y=((_=r.stored_in)==null?void 0:_.toLowerCase())||"";return a.includes(c.toLowerCase())||s.includes(c.toLowerCase())||p.includes(c.toLowerCase())||y.includes(c.toLowerCase())}).sort((r,a)=>{var y,h,x,g;const s=t==="date"?new Date(r.date):t==="product_gold.name"?(h=(y=r.product_gold)==null?void 0:y.name)==null?void 0:h.toLowerCase():r[t],p=t==="date"?new Date(a.date):t==="product_gold.name"?(g=(x=a.product_gold)==null?void 0:x.name)==null?void 0:g.toLowerCase():a[t];return s<p?i==="asc"?-1:1:s>p?i==="asc"?1:-1:0}),M=l.reduce((r,a)=>r+(a.buy_price||0),0),N=l.reduce((r,a)=>{var s;return r+(parseFloat((s=a.product_gold)==null?void 0:s.weight)||0)},0),A=l.reduce((r,a)=>r+(a.sell_price||0),0),B=l.reduce((r,a)=>r+(a.market_value||0),0),o=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),P=r=>{if(!m("delete_golds")){alert("Anda tidak memiliki izin untuk menghapus data");return}confirm("Apakah Anda yakin ingin menghapus data ini?")&&E.delete(route("golds.destroy",r))};return e.jsxs(F,{user:f.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Data Emas"}),children:[e.jsx(V,{title:"Data Emas"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"p-4 mb-4 text-sm text-blue-700 bg-blue-100 rounded-lg dark:bg-blue-200 dark:text-blue-800",role:"alert",children:[e.jsx("span",{className:"font-medium",children:"Info:"})," Market Value dihitung berdasarkan sumber harga masing-masing item (atau Default jika tidak diset)."]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-8 md:grid-cols-4",children:[e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow dark:bg-gray-800",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Berat"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:j?`${j} gram`:"0 gram"})]}),e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow dark:bg-gray-800",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Harga Beli"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o(D||0)})]}),e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow dark:bg-gray-800",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Est. Market Value"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:o(S.totalMarketValue||0)})]}),e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow dark:bg-gray-800",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Harga Jual"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:o(A)})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-sm dark:bg-gray-800 sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("div",{className:"flex items-center w-1/3",children:e.jsx($,{type:"text",name:"search",value:c,onChange:H,placeholder:"Cari...",className:"block w-full dark:bg-gray-900 dark:text-gray-100"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{href:route("product-golds.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase transition duration-150 ease-in-out bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 dark:bg-gray-800 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-700",children:"Daftar Produk"}),e.jsx(n,{href:route("gold-prices.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase transition duration-150 ease-in-out bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 dark:bg-gray-800 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-700",children:"Input Harga Harian"}),e.jsx(n,{href:route("gold-price-sources.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase transition duration-150 ease-in-out bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 dark:bg-gray-800 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-700",children:"Sumber Harga"}),m("create_golds")&&e.jsx(n,{href:route("golds.create"),className:"inline-flex items-center",children:e.jsxs(C,{children:[e.jsx("span",{className:"mr-2",children:"+"}),"Tambah Data"]})})]})]}),e.jsxs("table",{className:"w-full whitespace-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"font-bold text-left bg-gray-50 dark:bg-gray-700",children:[e.jsxs("th",{onClick:()=>u("sn"),className:"px-6 pt-5 pb-4 cursor-pointer dark:text-gray-200",children:["Serial No",t==="sn"&&(i==="asc"?" ðŸ”¼":" ðŸ”½")]}),e.jsxs("th",{onClick:()=>u("product_gold.name"),className:"px-6 pt-5 pb-4 cursor-pointer dark:text-gray-200",children:["Produk",t==="product_gold.name"&&(i==="asc"?" ðŸ”¼":" ðŸ”½")]}),e.jsx("th",{className:"px-6 pt-5 pb-4 dark:text-gray-200",children:"Berat"}),e.jsxs("th",{onClick:()=>u("buy_price"),className:"px-6 pt-5 pb-4 cursor-pointer dark:text-gray-200",children:["Harga Beli",t==="buy_price"&&(i==="asc"?" ðŸ”¼":" ðŸ”½")]}),e.jsx("th",{className:"px-6 pt-5 pb-4 dark:text-gray-200",children:"Market Value"}),e.jsxs("th",{onClick:()=>u("date"),className:"px-6 pt-5 pb-4 cursor-pointer dark:text-gray-200",children:["Tanggal",t==="date"&&(i==="asc"?" ðŸ”¼":" ðŸ”½")]}),e.jsx("th",{className:"px-6 pt-5 pb-4 dark:text-gray-200",children:"Action"})]})}),e.jsxs("tbody",{children:[l.map(r=>{var a,s;return e.jsxs("tr",{className:"hover:bg-gray-50 focus-within:bg-gray-50 dark:hover:bg-gray-700 dark:focus-within:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 dark:text-gray-200",children:r.sn}),e.jsxs("td",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 dark:text-gray-200",children:[(a=r.product_gold)==null?void 0:a.name,e.jsx("div",{className:"text-xs text-gray-500",children:r.production_year})]}),e.jsxs("td",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 dark:text-gray-200",children:[(s=r.product_gold)!=null&&s.weight?`${r.product_gold.weight} gram`:"-",r.gold_price_source&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",children:r.gold_price_source.code})})]}),e.jsxs("td",{className:"px-6 py-4 font-semibold text-blue-600 border-t border-gray-200 dark:border-gray-700 dark:text-blue-400",children:[o(r.buy_price),e.jsxs("div",{className:"text-xs font-normal text-gray-500",children:[o(r.buy_price_per_weight)," /g"]})]}),e.jsx("td",{className:"px-6 py-4 font-semibold text-purple-600 border-t border-gray-200 dark:border-gray-700 dark:text-purple-400",children:o(r.market_value||0)}),e.jsxs("td",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 dark:text-gray-200",children:[new Date(r.date).toLocaleDateString("id-ID"),e.jsx("div",{className:"text-xs text-gray-500",children:r.buy_from})]}),e.jsx("td",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[m("edit_golds")&&e.jsx(n,{href:route("golds.edit",r.id),children:e.jsx(C,{className:"px-2 py-1 text-xs",children:"Edit"})}),m("delete_golds")&&e.jsx(G,{onClick:()=>P(r.id),className:"px-2 py-1 text-xs",children:"Hapus"})]})})]},r.id)}),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center border-t border-gray-200 dark:border-gray-700 dark:text-gray-400",children:"Tidak ada data emas."})})]}),e.jsx("tfoot",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{colSpan:"2",className:"px-6 py-4 text-right border-t-2 border-gray-300 dark:border-gray-600 dark:text-gray-200",children:"Total Halaman Ini:"}),e.jsx("td",{className:"px-6 py-4 border-t-2 border-gray-300 dark:border-gray-600 dark:text-gray-200",children:N?`${N} gram`:"0 gram"}),e.jsx("td",{className:"px-6 py-4 text-blue-600 border-t-2 border-gray-300 dark:border-gray-600 dark:text-blue-400",children:o(M)}),e.jsx("td",{className:"px-6 py-4 text-purple-600 border-t-2 border-gray-300 dark:border-gray-600 dark:text-purple-400",children:o(B)}),e.jsx("td",{colSpan:"2",className:"border-t-2 border-gray-300 dark:border-gray-600"})]})})]}),d.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",d.from," to ",d.to," of ",d.total," results"]}),e.jsx("div",{className:"flex gap-2",children:d.links.map((r,a)=>r.url===null?e.jsx("span",{className:"px-3 py-1 text-sm text-gray-400 bg-gray-100 rounded dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed",dangerouslySetInnerHTML:{__html:r.label}},a):e.jsx(n,{href:r.url,className:`px-3 py-1 text-sm rounded ${r.active?"bg-blue-600 text-white font-semibold":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,dangerouslySetInnerHTML:{__html:r.label}},a))})]})]})})]})})]})}export{X as default};
